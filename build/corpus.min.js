var _=require("underscore");_.str=require("underscore.string"),_.mixin(_.str.exports()),_.str.include("Underscore.string","string");var natural=require("natural"),Corpus=function(a){if(a=a||[],!(this instanceof Corpus))return new Corpus(a);var b=this;if("string"==typeof a)a=Array(a),this.documents=a;else{if(Array.isArray(a)!==!0||!a.every(function(a){return"string"==typeof a}))throw new TypeError("Constructor expects Array of documents");this.documents=a}this.addDoc=function(a){if("string"!=typeof a)throw new TypeError("Argument has to be a string");b.documents.push(a)},this.addDocs=function(a){if(Array.isArray(a)!==!0||!a.every(function(a){return"string"==typeof a}))throw new TypeError("Parameter expects an array of strings");b.documents=b.documents.concat(a)},this.clean=function(){return b.documents=b.documents.map(function(a){return _.clean(a)}),b},this.trim=function(){return b.documents=this.documents.map(function(a){return _.trim(a)}),b},this.inspect=function(a){void 0===a&&(a=200),b.documents.forEach(function(b,c){console.log("Document "+c+":"),console.log(_(b).truncate(a)),console.log("─ ─ ─ ─ ─")})},this.toLower=function(){return b.documents=b.documents.map(function(a){return a.toLowerCase()}),b},this.toUpper=function(){return b.documents=b.documents.map(function(a){return a.toUpperCase()}),b},this.stem=function(a){return b.documents=b.documents.map(function(b){return"Lancaster"==a?natural.LancasterStemmer.stem(b):natural.PorterStemmer.stem(b)}),b},this.map=function(a){return b.documents=_corpus.documents.map(a),b},this.removeWords=function(a,c){for(var d=0;d<b.documents.length;d++)for(var e=0;e<a.length;e++){var f=c?"g":"gi",g=new RegExp("\\b"+a[e]+"\\b",f);b.documents[d]=b.documents[d].replace(g,"")}return b},this.removeInterpunctuation=function(){return b.documents=b.documents.map(function(a){return a.replace(/[\!\?\.,;-]/g," ")}),b},this.removeNewlines=function(){return b.documents=b.documents.map(function(a){return a.replace(/\r?\n|\r/g," ")}),b},this.removeDigits=function(){return b.documents=b.documents.map(function(a){return a.replace(/\d/g,"")}),b},this.removeInvalidCharacters=function(){return b.documetns=b.documents.map(function(a){return a.replace(/\uFFFD/g,"")}),b}};exports.Corpus=Corpus;